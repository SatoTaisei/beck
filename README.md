# Beck - Mock Contact System -

## はじめに

開発サーバーを立ち上げる場合は、以下のコマンドを入力。

```bash
npm run dev
# or
yarn dev
```

ブラウザで [http://localhost:3000](http://localhost:3000) を確認。

コードネーム「Beck -Mock Contact System-」は、漫画 BECK の海外向けバンド名「Mongolian Chop Squad（M.C.S）」が由来。

## 設定環境

- Next.js
- Typescript
- Tailwind CSS
- Headless UI
- ESlint
- Prettier
- husky

### 参考

- Linter：[React+TS プロジェクトで便利だった Lint/Format 設定紹介](https://zenn.dev/yoshiko/articles/0994f518015c04)

## 要件定義

### 目的

本文書が何のシステム開発に対して作成されている文書なのかを明記します。また、既存システムなのか、新規開発であるかも明記します。既存システムの場合は第 ○ 次開発などと番号付けして管理されます。

### 概要

- ゲストは、kokumi された問い合わせフォームから、あらかじめ決められた項目を入力し、問い合わせを送信する
- スタッフは各々あらかじめ設定されたログイン情報を使って問い合わせ管理画面にログインする
- スタッフは問い合わせ管理画面で、未対応の問い合わせに回答する
- 回答に対するやりとりは、問い合わせに対してユニークに割り当てられた URL 上のコミュニケーション画面で行う

### システム方式・構成

システム構成は次の通りです。なお、新たなハードウェア導入は予定していません。

- アプリケーションサーバー  
  自動連携設定を行う画面、連携結果を表示する画面を提供します。
- データベースサーバー  
  既存の社内サーバーです。
- 経理システム  
  現在経理部で使われている経理システムおよび専用のワークステーションです。

### 業務要件

#### フロー

システム構築後、フローは次のようになります。

1. 経理担当者が専用画面にて自動取り込みに関して設定
1. バッチシステムが自動処理後、経理担当者にメールで完了を通知
1. 経理担当者が経理システムへログイン
1. 取り込み未確定データを確認後、経理システムにて確定処理を実行

### 機能要件

- 問い合わせ機能

  - 問い合わせフォームで以下の項目を指定して問い合わせを送信できる
    - 氏名（必須 / 16 文字以下）
    - メールアドレス（必須 / 200 文字以下）
    - 電話（必須 / 12 文字以下）
    - 製品種別（必須 / A001, A002, ..., A016 の全 16 種類のプルダウンメニュー）
    - 問い合わせ内容（必須 / 2000 文字以下）
  - 問い合わせを送信すると、問い合わせコミュニケーションを行う URL が個別に割り当てられ、移行のコミュニケーションはその URL 上で行える

- ログイン・ログアウト機能
  - あらかじめ割り当てられたメールアドレスとパスワードで管理画面にログイン・ログアウトできる
- 一覧表示機能

  - 問い合わせを一覧表示できる
    - 一覧できる項目は、対応状況・氏名。電話番号。生品種別・問い合わせ内容（最大 100 文字）・問い合わせ日時
    - デフォルトでは未対応の問い合わせが古い順に一覧できる
    - 問い合わせを指定して、対応上京の詳細を確認できる
    - 一覧の上部で表示を切り替えることで、対応済みの問い合わせや、対応中の問い合わせを一覧できる

- 詳細確認機能

  - 指定した問い合わせの各項目を確認できる
  - それまでの対応履歴（対応者・対応日時・送信メッセージ・スタッフのコメント）を確認できる
  - 「対応開始」ボタンを推すことで、ログイン中のスタッフで「対応中」にできる

- 対応機能
  - 自分自身が「対応中」の問い合わせを指定して、以下の操作ができる
    - 指定した問い合わせについて、問い合わせしてきたゲストに最大 4,000 文字のメッセージを送信できる
    - 指定した問い合わせに対し、スタッフのコメントを残しておくことができる
    - 「対応完了」「未対応に戻す」ボタンを押すことで、それぞれ対応状況を変更できる
  - 自分自身が「対応中」にした問い合わせでなければ、スタッフのコメントを残したり、メッセージを送ったりすることはできない

#### 画面

新たに作成、変更される画面をリストアップします。

- 問い合わせ入力フォーム画面  
  ゲストが氏名、メールアドレス、電話、製品種別、問い合わせ内容を入力する画面
- ログイン・ログアウト画面  
  スタッフが問い合わせを管理する画面にログイン・ログアウトするための画面
- 一覧表示機能画面  
  問い合わせを一覧表示して対応状況や問い合わせ概要を確認できる画面
- 詳細確認機能画面  
  問い合わせの内容や対応履歴などの詳細情報を確認できる画面
- 対応機能画面  
  各問い合わせに対してチャット形式で回答ができる画面

#### 権限

- ゲスト：権限なし
- スタッフ：ログインができ管理画面で問い合わせに対する回答ができる
